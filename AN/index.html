<!-- Angel Numbers Tracker v1.0B12 -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1324" />
  <title>Angel Numbers Tracker</title>

  <style>
    :root{
      --bg0:#08101f;
      --bg1:#0b1324;
      --panel:#0c1528cc;
      --stroke:rgba(235,245,255,.16);
      --stroke2:rgba(235,245,255,.22);
      --strokeBold:rgba(180,210,255,.42);
      --text:rgba(235,245,255,.90);
      --muted:rgba(235,245,255,.60);
      --muted2:rgba(235,245,255,.42);
      --accent:#2b4e7a;
      --shadow:0 16px 40px rgba(0,0,0,.35);
      --radius:22px;
      --radius2:26px;
      --gap:14px;

      --btnH:54px;
      --btnR:26px;
      --pad:18px;
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 800px at 20% 10%, #1a2c66aa 0%, transparent 55%),
        radial-gradient(900px 650px at 75% 25%, #2b6fb466 0%, transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overflow:hidden; /* app-style (panels manage their own scroll areas) */
    }

    .wrap{
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      padding:18px 14px calc(18px + env(safe-area-inset-bottom)) 14px;
      gap:14px;
    }

    /* Header */
    .hdr{
      width:min(720px, 100%);
      display:flex;
      align-items:center;
      gap:12px;
      padding:8px 6px 0 6px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      user-select:none;
    }
    .logo{
      width:44px;
      height:44px;
      border-radius:14px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.12);
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 10px 26px rgba(0,0,0,.25);
    }
    .title{
      font-size:40px;
      font-weight:800;
      letter-spacing:.3px;
      line-height:1;
      background: linear-gradient(180deg, rgba(210, 190, 255, .96), rgba(150, 150, 255, .74));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      text-shadow: 0 10px 26px rgba(0,0,0,.28);
    }

    /* Panel */
    .panel{
      width:min(720px, 100%);
      border-radius:var(--radius2);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow);
      padding:16px;
    }
    .panelInner{
      border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(8,16,31,.55), rgba(8,16,31,.35));
      border:2px solid rgba(43,78,122,.55);
      padding:18px;
    }

    /* Buttons */
    .row{
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
    }
    .btn{
      height:var(--btnH);
      padding:0 22px;
      border-radius:var(--btnR);
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      color:var(--text);
      font-weight:700;
      letter-spacing:.2px;
      box-shadow: 0 12px 26px rgba(0,0,0,.20);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{ transform: translateY(1px); }
    .btnPrimary{
      background: linear-gradient(180deg, rgba(70,140,255,.95), rgba(50,120,240,.75));
      border:1px solid rgba(140,190,255,.35);
      color:#061021;
    }
    .btnGhost{
      background: rgba(255,255,255,.04);
    }

    /* Form */
    .label{
      color:var(--muted);
      font-weight:800;
      letter-spacing:.2px;
      margin-top:14px;
      margin-bottom:8px;
      font-size:30px;
    }
    .fieldRow{
      display:flex;
      gap:14px;
      align-items:center;
    }
    input, select, textarea{
      width:100%;
      border-radius:22px;
      background: rgba(255,255,255,.05);
      border:2px solid rgba(255,255,255,.14);
      color:var(--text);
      padding:14px 16px;
      font-size:22px;
      outline:none;
    }
    input::placeholder, textarea::placeholder{ color: rgba(235,245,255,.34); }
    textarea{
      min-height:110px;
      resize:vertical;
    }
    .miniLabel{
      color:var(--muted);
      font-weight:800;
      letter-spacing:.2px;
      font-size:18px;
      margin:12px 0 8px 0;
    }

    /* LOG LAYOUT */
    .logShell{
      /* IMPORTANT: allow an internal scroll area while panel stays fixed */
      display:flex;
      flex-direction:column;
      gap:14px;
      height: calc(100vh - 210px);
      max-height: 920px;
      min-height: 420px;
    }

    /* This is the ONLY behavioral/layout change in v1.0B12:
       the log list becomes its own scrollable container */
    .logList{
      flex:1;
      min-height:0;               /* critical for flexbox scrolling */
      overflow-y:auto;            /* scrollable */
      -webkit-overflow-scrolling: touch; /* smooth iOS/Android momentum */
      padding-right:6px;          /* keep scrollbar off text */
      overscroll-behavior: contain;
      touch-action: pan-y;
    }

    .card{
      border-radius:22px;
      background: rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      padding:14px 14px 14px 14px;
      margin-bottom:14px;
      box-shadow: 0 12px 28px rgba(0,0,0,.18);
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .card:active{ transform: translateY(1px); }
    .cardTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .dt{
      color:rgba(235,245,255,.50);
      font-weight:700;
      letter-spacing:.2px;
      font-size:20px;
      margin-bottom:8px;
    }
    .num{
      font-size:42px;
      font-weight:900;
      letter-spacing:.5px;
      line-height:1;
    }
    .pat{
      color:rgba(235,245,255,.58);
      font-weight:800;
      font-size:22px;
      margin-top:10px;
      white-space:nowrap;
    }
    .line{
      margin-top:10px;
      color:rgba(235,245,255,.78);
      font-size:20px;
    }
    .line b{ color:rgba(235,245,255,.92); }

    /* Modal */
    .modalBack{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:50;
    }
    .modal{
      width:min(720px, 100%);
      border-radius:28px;
      background: linear-gradient(180deg, rgba(8,16,31,.96), rgba(8,16,31,.78));
      border:2px solid rgba(43,78,122,.55);
      box-shadow: 0 24px 70px rgba(0,0,0,.55);
      overflow:hidden;
    }
    .modalHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:16px 16px 10px 16px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .modalTitle{
      font-size:30px;
      font-weight:900;
      letter-spacing:.2px;
    }
    .xbtn{
      width:54px;
      height:54px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color:var(--text);
      font-weight:900;
      font-size:22px;
      cursor:pointer;
    }
    .modalBody{
      padding:16px;
    }
    .modalBtns{
      display:flex;
      gap:14px;
      padding:0 16px 16px 16px;
    }
    .modalBtns .btn{ flex:1; }

    /* Edit modal scroll (existing behavior kept; it will scroll within modal body if needed) */
    .modalBodyScroll{
      max-height: calc(100vh - 260px);
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      padding-right:6px;
    }

    .foot{
      width:min(720px, 100%);
      color:rgba(235,245,255,.38);
      text-align:center;
      font-weight:700;
      letter-spacing:.2px;
      padding:6px 0 0 0;
      user-select:none;
    }

    @media (max-width:520px){
      .title{ font-size:34px; }
      .label{ font-size:28px; }
      input, select, textarea{ font-size:20px; }
      .logShell{ height: calc(100vh - 220px); }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="hdr">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <!-- simple wings + halo mark (inline SVG, no external assets) -->
          <svg width="28" height="28" viewBox="0 0 64 64" fill="none">
            <path d="M20 41c-6-2-10-7-10-13 0-6 4-11 10-13 2 7 5 13 10 18-5 3-8 6-10 8Z" stroke="rgba(200,220,255,.88)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M44 41c6-2 10-7 10-13 0-6-4-11-10-13-2 7-5 13-10 18 5 3 8 6 10 8Z" stroke="rgba(200,220,255,.88)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M22 44c4 6 10 9 10 9s6-3 10-9c-4-3-7-5-10-6-3 1-6 3-10 6Z" stroke="rgba(120,180,255,.95)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M22 14c3-4 17-4 20 0" stroke="rgba(235,245,255,.65)" stroke-width="3" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="title">Angel Numbers Tracker</div>
      </div>
    </div>

    <div class="panel">
      <div class="panelInner" id="mainPanel">
        <!-- LOG PANEL (primary screen) -->
        <div class="logShell" id="logShell">
          <div class="row">
            <button class="btn" id="btnExport">Export</button>
            <button class="btn" id="btnAdd">ADD</button>
            <button class="btn" id="btnBack">Back</button>
          </div>

          <div class="label" style="margin-top:6px;">Search</div>
          <div class="fieldRow">
            <input id="q" type="text" placeholder="Try: 111, mirror, reset, new" />
            <button class="btn" id="btnSearch">Search</button>
          </div>

          <div class="fieldRow" style="gap:18px;">
            <div style="flex:1;">
              <div class="miniLabel">From</div>
              <input id="from" type="date" />
            </div>
            <div style="flex:1;">
              <div class="miniLabel">To</div>
              <input id="to" type="date" />
            </div>
          </div>

          <!-- THIS is the scrollable log list container -->
          <div class="logList" id="logList" aria-label="Angel number log list"></div>
        </div>
      </div>
    </div>

    <div class="foot" id="foot">v1.0B12</div>
  </div>

  <!-- CARD MODAL -->
  <div class="modalBack" id="cardModalBack" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="modalHead">
        <div class="modalTitle">Angel Number Card</div>
        <button class="xbtn" id="cardClose">×</button>
      </div>
      <div class="modalBody">
        <div style="display:flex;align-items:center;gap:12px;margin-bottom:14px;">
          <div class="logo" style="width:52px;height:52px;border-radius:16px;">
            <svg width="30" height="30" viewBox="0 0 64 64" fill="none">
              <path d="M20 41c-6-2-10-7-10-13 0-6 4-11 10-13 2 7 5 13 10 18-5 3-8 6-10 8Z" stroke="rgba(200,220,255,.88)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M44 41c6-2 10-7 10-13 0-6-4-11-10-13-2 7-5 13-10 18 5 3 8 6 10 8Z" stroke="rgba(200,220,255,.88)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M22 44c4 6 10 9 10 9s6-3 10-9c-4-3-7-5-10-6-3 1-6 3-10 6Z" stroke="rgba(120,180,255,.95)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M22 14c3-4 17-4 20 0" stroke="rgba(235,245,255,.65)" stroke-width="3" stroke-linecap="round"/>
            </svg>
          </div>
          <div style="font-weight:900;font-size:22px;color:rgba(235,245,255,.78);">Angel Numbers Tracker</div>
        </div>

        <div class="modalBodyScroll">
          <div class="line"><b>Date/Time:</b> <span id="m_dt"></span></div>
          <div class="line" style="margin-top:10px;"><b>Number:</b> <span id="m_num"></span></div>
          <div class="line" style="margin-top:10px;"><b>Notes:</b> <span id="m_notes"></span></div>
          <div class="line" style="margin-top:10px;"><b>Pattern:</b> <span id="m_pat"></span></div>
          <div class="line" style="margin-top:10px;"><b>Meaning:</b> <span id="m_mean"></span></div>
        </div>
      </div>
      <div class="modalBtns">
        <button class="btn" id="btnCopy">Copy</button>
        <button class="btn" id="btnExportOne">Export</button>
      </div>
      <div class="modalBtns" style="padding-top:0;">
        <button class="btn btnPrimary" id="btnEdit">Edit</button>
      </div>
    </div>
  </div>

  <!-- EDIT MODAL -->
  <div class="modalBack" id="editModalBack" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="modalHead">
        <div class="modalTitle">Edit Entry</div>
        <button class="xbtn" id="editClose">×</button>
      </div>
      <div class="modalBody">
        <div class="modalBodyScroll">
          <div class="miniLabel">Date/Time</div>
          <input id="e_dt" type="datetime-local" />

          <div class="miniLabel">Number</div>
          <input id="e_num" type="text" inputmode="numeric" placeholder="e.g., 111, 1010, 7777" />

          <div class="miniLabel">Pattern</div>
          <input id="e_pat" type="text" placeholder="e.g., Repeating 7s, Mirror, Mixed pattern" />

          <div class="miniLabel">Meaning</div>
          <textarea id="e_mean" placeholder="Meaning / interpretation"></textarea>

          <div class="miniLabel">Notes</div>
          <textarea id="e_notes" placeholder="Optional notes"></textarea>
        </div>
      </div>
      <div class="modalBtns">
        <button class="btn" id="btnDelete">Delete</button>
        <button class="btn btnPrimary" id="btnSave">Save</button>
      </div>
    </div>
  </div>

  <script>
    /* ===== Angel Numbers Tracker v1.0B12 =====
       Change in this version:
       - Log list is now its own scrollable container (.logList) with flex + overflow-y:auto,
         ensuring the list area can be dragged/moved up and down on mobile.
       Nothing else intentionally changed.
    */

    const APP_VERSION = "v1.0B12";
    const LS_KEY = "angel_numbers_tracker_records_v1";

    /** @type {{id:string, ts:number, num:string, pattern:string, meaning:string, notes:string}[]} */
    let records = [];
    let activeId = null;

    const $ = (id) => document.getElementById(id);

    function pad2(n){ return String(n).padStart(2,"0"); }

    function tsToDisplay(ts){
      const d = new Date(ts);
      const mm = pad2(d.getMonth()+1);
      const dd = pad2(d.getDate());
      const yy = d.getFullYear();
      let hh = d.getHours();
      const ampm = hh >= 12 ? "PM" : "AM";
      hh = hh % 12; if(hh===0) hh=12;
      const mi = pad2(d.getMinutes());
      const ss = pad2(d.getSeconds());
      return `${mm}/${dd}/${yy}, ${hh}:${mi}:${ss} ${ampm}`;
    }

    function tsToInput(ts){
      const d = new Date(ts);
      const yyyy = d.getFullYear();
      const mm = pad2(d.getMonth()+1);
      const dd = pad2(d.getDate());
      const hh = pad2(d.getHours());
      const mi = pad2(d.getMinutes());
      return `${yyyy}-${mm}-${dd}T${hh}:${mi}`;
    }

    function inputToTs(val){
      // datetime-local => local time
      const d = new Date(val);
      return isNaN(d.getTime()) ? Date.now() : d.getTime();
    }

    function load(){
      try{
        const raw = localStorage.getItem(LS_KEY);
        records = raw ? JSON.parse(raw) : [];
        if(!Array.isArray(records)) records = [];
      }catch{
        records = [];
      }
    }

    function save(){
      localStorage.setItem(LS_KEY, JSON.stringify(records));
    }

    function uid(){
      return Math.random().toString(16).slice(2) + "-" + Date.now().toString(16);
    }

    function norm(s){ return (s||"").toString().trim().toLowerCase(); }

    function inRange(ts, fromStr, toStr){
      // from/to are yyyy-mm-dd
      const d = new Date(ts);
      const day = `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())}`;
      if(fromStr && day < fromStr) return false;
      if(toStr && day > toStr) return false;
      return true;
    }

    function filterRecords(){
      const q = norm($("q").value);
      const from = $("from").value;
      const to = $("to").value;

      let out = records.slice().sort((a,b)=>b.ts-a.ts);

      if(q){
        out = out.filter(r=>{
          const hay = [
            r.num, r.pattern, r.meaning, r.notes, tsToDisplay(r.ts)
          ].map(norm).join(" | ");
          return hay.includes(q);
        });
      }
      out = out.filter(r=>inRange(r.ts, from, to));
      return out;
    }

    function render(){
      const list = $("logList");
      list.innerHTML = "";
      const items = filterRecords();

      if(items.length === 0){
        const empty = document.createElement("div");
        empty.style.color = "rgba(235,245,255,.55)";
        empty.style.fontWeight = "800";
        empty.style.padding = "14px 6px";
        empty.textContent = "No entries match your filters.";
        list.appendChild(empty);
        return;
      }

      for(const r of items){
        const card = document.createElement("div");
        card.className = "card";
        card.dataset.id = r.id;

        const top = document.createElement("div");
        top.className = "cardTop";

        const left = document.createElement("div");
        const dt = document.createElement("div");
        dt.className = "dt";
        dt.textContent = tsToDisplay(r.ts);

        const num = document.createElement("div");
        num.className = "num";
        num.textContent = r.num || "(no number)";

        left.appendChild(dt);
        left.appendChild(num);

        const right = document.createElement("div");
        right.className = "pat";
        right.textContent = r.pattern || "";

        top.appendChild(left);
        top.appendChild(right);

        const notes = document.createElement("div");
        notes.className = "line";
        notes.innerHTML = `<b>Notes:</b> ${escapeHtml(r.notes || "None")}`;

        const meaning = document.createElement("div");
        meaning.className = "line";
        meaning.innerHTML = `<b>Meaning:</b> ${escapeHtml(r.meaning || "")}`;

        card.appendChild(top);
        card.appendChild(notes);
        card.appendChild(meaning);

        card.addEventListener("click", ()=>openCard(r.id));
        list.appendChild(card);
      }
    }

    function escapeHtml(s){
      return (s||"").toString()
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function openCard(id){
      const r = records.find(x=>x.id===id);
      if(!r) return;
      activeId = id;
      $("m_dt").textContent = tsToDisplay(r.ts);
      $("m_num").textContent = r.num || "";
      $("m_notes").textContent = r.notes || "None";
      $("m_pat").textContent = r.pattern || "";
      $("m_mean").textContent = r.meaning || "";
      showModal($("cardModalBack"), true);
    }

    function closeCard(){
      showModal($("cardModalBack"), false);
    }

    function openEdit(id){
      const r = records.find(x=>x.id===id);
      if(!r) return;
      activeId = id;
      $("e_dt").value = tsToInput(r.ts);
      $("e_num").value = r.num || "";
      $("e_pat").value = r.pattern || "";
      $("e_mean").value = r.meaning || "";
      $("e_notes").value = r.notes || "";
      showModal($("editModalBack"), true);
    }

    function closeEdit(){
      showModal($("editModalBack"), false);
    }

    function showModal(el, on){
      el.style.display = on ? "flex" : "none";
    }

    function addNew(){
      // quick add: create blank entry then open edit
      const now = Date.now();
      const r = { id: uid(), ts: now, num: "", pattern: "", meaning: "", notes: "" };
      records.push(r);
      save();
      render();
      openEdit(r.id);
    }

    function saveEdit(){
      const r = records.find(x=>x.id===activeId);
      if(!r) return;
      r.ts = inputToTs($("e_dt").value || tsToInput(Date.now()));
      r.num = ($("e_num").value || "").trim();
      r.pattern = ($("e_pat").value || "").trim();
      r.meaning = ($("e_mean").value || "").trim();
      r.notes = ($("e_notes").value || "").trim();
      save();
      render();
      closeEdit();
      closeCard();
    }

    function deleteActive(){
      const idx = records.findIndex(x=>x.id===activeId);
      if(idx < 0) return;
      if(!confirm("Delete this entry?")) return;
      records.splice(idx, 1);
      save();
      render();
      closeEdit();
      closeCard();
    }

    function exportAll(){
      const items = filterRecords().slice().sort((a,b)=>b.ts-a.ts);
      const now = new Date();
      const gen = now.toLocaleString();

      const rangeTxt = (() => {
        const from = $("from").value;
        const to = $("to").value;
        const q = $("q").value.trim();
        let t = "All log entries (filtered by search/date if set)";
        if(from || to || q) t = "Filtered log entries (current Search + From/To)";
        return t;
      })();

      let out = "";
      out += "Angel Numbers Tracker — Export Report\n";
      out += `App Version: ${APP_VERSION}\n`;
      out += "Report: Log Export\n";
      out += `Generated: ${gen}\n`;
      out += `Range: ${rangeTxt}\n`;
      out += "How this data was captured:\n";
      out += "- Sightings are entered manually into Angel Numbers Tracker on this device.\n";
      out += "- Data is stored locally on the phone (no cloud sync, no account).\n";
      out += "- Each record may include the number, pattern type, a cultural/numerology meaning, and optional notes.\n";
      out += "This report reflects the Log screen filters (Search + optional From/To dates).\n";
      out += "------------------------------\n";

      for(const r of items){
        out += `${tsToDisplay(r.ts)}\n`;
        out += `Number: ${r.num || ""}\n`;
        out += `Pattern: ${r.pattern || ""}\n`;
        out += `Meaning: ${r.meaning || ""}\n`;
        out += `Notes: ${r.notes || "None"}\n\n`;
      }

      downloadText(out, `Angel_Numbers_Export_${now.getFullYear()}-${pad2(now.getMonth()+1)}-${pad2(now.getDate())}.txt`);
    }

    function exportOne(id){
      const r = records.find(x=>x.id===id);
      if(!r) return;
      const now = new Date();
      let out = "";
      out += "Angel Numbers Tracker — Export Report\n";
      out += `App Version: ${APP_VERSION}\n`;
      out += "Report: Single Entry\n";
      out += `Generated: ${now.toLocaleString()}\n`;
      out += "------------------------------\n";
      out += `${tsToDisplay(r.ts)}\n`;
      out += `Number: ${r.num || ""}\n`;
      out += `Pattern: ${r.pattern || ""}\n`;
      out += `Meaning: ${r.meaning || ""}\n`;
      out += `Notes: ${r.notes || "None"}\n`;
      downloadText(out, `Angel_Number_${(r.num||"entry")}_${now.getFullYear()}-${pad2(now.getMonth()+1)}-${pad2(now.getDate())}.txt`);
    }

    function downloadText(text, filename){
      const blob = new Blob([text], {type:"text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=>URL.revokeObjectURL(url), 800);
    }

    async function copyActive(){
      const r = records.find(x=>x.id===activeId);
      if(!r) return;
      const txt =
        `Angel Number Card\n` +
        `Date/Time: ${tsToDisplay(r.ts)}\n` +
        `Number: ${r.num || ""}\n` +
        `Pattern: ${r.pattern || ""}\n` +
        `Meaning: ${r.meaning || ""}\n` +
        `Notes: ${r.notes || "None"}\n`;
      try{
        await navigator.clipboard.writeText(txt);
        alert("Copied.");
      }catch{
        alert("Copy failed on this device/browser.");
      }
    }

    function wire(){
      $("foot").textContent = APP_VERSION;

      $("btnSearch").addEventListener("click", render);
      $("q").addEventListener("keydown", (e)=>{ if(e.key==="Enter"){ e.preventDefault(); render(); }});
      $("from").addEventListener("change", render);
      $("to").addEventListener("change", render);

      $("btnExport").addEventListener("click", exportAll);
      $("btnAdd").addEventListener("click", addNew);
      $("btnBack").addEventListener("click", ()=>history.back());

      $("cardClose").addEventListener("click", closeCard);
      $("cardModalBack").addEventListener("click", (e)=>{ if(e.target === $("cardModalBack")) closeCard(); });

      $("btnCopy").addEventListener("click", copyActive);
      $("btnExportOne").addEventListener("click", ()=>exportOne(activeId));
      $("btnEdit").addEventListener("click", ()=>{ closeCard(); openEdit(activeId); });

      $("editClose").addEventListener("click", closeEdit);
      $("editModalBack").addEventListener("click", (e)=>{ if(e.target === $("editModalBack")) closeEdit(); });

      $("btnSave").addEventListener("click", saveEdit);
      $("btnDelete").addEventListener("click", deleteActive);

      // Seed minimal demo data if empty (kept consistent with prior behavior)
      if(records.length === 0){
        records.push(
          {id:uid(), ts:Date.now()-1000*60*60*24*1, num:"7777", pattern:"Repeating 7s", meaning:"Emphasis pattern (7777): 7 is often linked with insight, inner wisdom, spiritual inquiry, and learning through reflection.", notes:"Website"},
          {id:uid(), ts:Date.now()-1000*60*60*28, num:"101010", pattern:"Mixed pattern", meaning:"A general interpretation is heightened awareness: notice your thoughts, environment, and choices—then act deliberately. Digit-sum lens (3 → 3): 3 is often linked with creativity, expression, growth, and encouragement to communicate.", notes:"On my phone"}
        );
        save();
      }
    }

    load();
    wire();
    render();
  </script>
</body>
</html>

<!--
Version Detail Notes
App Version: v1.0B12
Base: Prior v1.0B11 (per user stream)
Changes (requested):
- FIX: Log panel list is now its own scrollable container (flex + overflow-y:auto + momentum scrolling).
- Nothing else intentionally changed.
-->
