<!--
Vitals Tracker (Modular) — index.html
App Version: v2.001
Purpose:
- Main app shell for Vitals Tracker v2 (modular architecture).
- Hosts the swipeable carousel panels (Home, Log, Charts) and the Add/Edit screen.
- Loads CSS + JS modules that implement storage (non-destructive v1 import), UI, gestures, chart pan/zoom (horizontal only), and exports.
Key Requirements Implemented/Enabled Here:
- Carousel DOM structure for left/right swipe.
- Fixed outer frame + inner scrolling content per panel (consistent border behavior).
- Chart canvas is placed in a dedicated interaction container so chart gestures can consume touch/scroll (panel should not scroll while interacting with chart).
Latest Update (v2.001):
- Initial modular shell with required IDs/classes for gestures, chart interaction, and chart-range export.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1324" />
  <title>Vitals Tracker</title>

  <link rel="manifest" href="pwa/manifest.json" />

  <link rel="stylesheet" href="css/app.css" />

  <noscript>
    <style>
      body{ background:#0b1324; color:#fff; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; padding:20px; }
      .ns{ max-width:520px; margin:0 auto; }
    </style>
  </noscript>
</head>

<body>
  <noscript>
    <div class="ns">
      <h2>Vitals Tracker</h2>
      <p>This app requires JavaScript to run.</p>
    </div>
  </noscript>

  <div class="app" id="appRoot" aria-label="Vitals Tracker App">
    <div class="logoTitle" aria-label="Vitals Tracker">
      <!-- Inline SVG kept in index for identity consistency; styling remains in CSS -->
      <svg viewBox="0 0 900 140" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Vitals Tracker">
        <defs>
          <linearGradient id="vtg" x1="0" y1="0" x2="1" y2="0">
            <stop offset="0%" stop-color="#4fa3ff"/>
            <stop offset="100%" stop-color="#2f78ff"/>
          </linearGradient>
          <filter id="vts" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="8" stdDeviation="8" flood-color="rgba(0,0,0,.35)"/>
          </filter>
        </defs>

        <g transform="translate(46 24)" filter="url(#vts)">
          <rect x="0" y="0" width="92" height="92" rx="26" fill="rgba(255,255,255,.06)" stroke="rgba(235,245,255,.22)" stroke-width="2"/>
          <path d="M18 54h18l10-32 16 58 12-36h28" fill="none" stroke="url(#vtg)" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
        </g>

        <text x="160" y="92"
              font-family="system-ui,Segoe UI,Roboto,Helvetica,Arial"
              font-size="76"
              font-weight="850"
              fill="url(#vtg)"
              letter-spacing=".5"
              filter="url(#vts)">Vitals Tracker</text>
      </svg>
    </div>

    <!-- Carousel viewport -->
    <div class="viewport" id="viewport" aria-label="Panels viewport">
      <div class="track" id="track" aria-label="Panels track">

        <!-- HOME -->
        <section id="home" class="panel card accentFrame" aria-label="Home panel">
          <div class="panelFrame">
            <div class="panelInner">
              <div class="homeMain">
                <button id="btnGoAdd" class="btn primary" type="button">ADD Reading</button>
                <button id="btnGoLog" class="btn" type="button">Log</button>
                <button id="btnGoCharts" class="btn" type="button">Charts</button>

                <div class="homeFooterRow">
                  <button id="btnInstall" class="btn small" type="button">Install</button>
                  <button id="btnClearAll" class="btn small" type="button">Clear Data</button>
                  <div class="grow"></div>
                  <button id="btnExitHome" class="btn small danger" type="button">Exit</button>
                </div>

                <div class="subtle">Data stays on your phone (local only).</div>
                <div class="ptrHint" id="ptrHint">Pull down on Home to refresh (release).</div>

                <div class="subtle" id="dataStatus" aria-live="polite"></div>

                <div class="footerTiny">
                  <div id="footerVersion">v2.001</div>
                  <div>developed by Keyth Jyles</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- LOG -->
        <section id="log" class="panel card accentFrame" aria-label="Log panel">
          <div class="panelFrame">
            <div class="panelInner" id="logInner">
              <div class="row center">
                <button id="btnExportLog" class="btn small" type="button">Export</button>
                <button id="btnAddFromLog" class="btn small" type="button">ADD</button>
                <div class="grow"></div>
                <button id="btnBackFromLog" class="btn small" type="button">Back</button>
              </div>

              <div class="label">Search</div>
              <div class="searchRow">
                <input id="search" class="field" placeholder="Type a word: sweaty, dizzy, headache..." />
                <button id="btnRunSearch" class="btn small" type="button">Search</button>
              </div>

              <div class="filters">
                <div class="dateField">
                  <div class="miniLabel">From</div>
                  <input id="fromDate" class="field" type="date" />
                </div>
                <div class="dateField">
                  <div class="miniLabel">To</div>
                  <input id="toDate" class="field" type="date" />
                </div>
              </div>

              <div id="logList" aria-label="Log entries"></div>
            </div>
          </div>
        </section>

        <!-- CHARTS -->
        <section id="charts" class="panel card accentFrame" aria-label="Charts panel">
          <div class="panelFrame">
            <div class="panelInner" id="chartsInner">
              <div class="row center">
                <button id="btnExportCharts" class="btn small" type="button">Export</button>
                <div class="grow"></div>
                <button id="btnBackFromCharts" class="btn small" type="button">Back</button>
              </div>

              <div class="subtle" id="chartHelp">
                Pan/zoom horizontally on the chart. Export includes only the visible chart range.
              </div>

              <!-- Live chart-visible range label (no week selector in v2) -->
              <div class="rangeLabel" id="chartRangeLabel" aria-live="polite">—</div>

              <!-- Chart interaction container:
                   - JS will prevent panel scroll while interacting with chart.
                   - touch-action is controlled in CSS; JS will also add guards. -->
              <div class="chartWrap" id="chartWrap">
                <canvas id="chart" width="900" height="520" aria-label="Vitals chart"></canvas>
              </div>

              <div class="subtle" id="chartLegendHint">
                Bands indicate systolic categories (hypotension → stage 2). Lines: SYS, DIA, HR.
              </div>
            </div>
          </div>
        </section>

      </div>
    </div>

    <!-- ADD / EDIT (separate from carousel; shown/hidden by JS) -->
    <section id="add" class="card accentFrame hidden" aria-label="Add or edit reading">
      <div id="editPill" class="editPill hidden">Editing entry</div>

      <div id="timeLine" class="timeLine">--:--:-- --, --/--/----</div>

      <div class="triple">
        <div>
          <div class="miniLabel">Systolic</div>
          <input id="sys" class="field" inputmode="numeric" pattern="[0-9]*" placeholder="e.g., 132" />
        </div>
        <div>
          <div class="miniLabel">Diastolic</div>
          <input id="dia" class="field" inputmode="numeric" pattern="[0-9]*" placeholder="e.g., 91" />
        </div>
        <div>
          <div class="miniLabel">Heart Rate</div>
          <input id="hr" class="field" inputmode="numeric" pattern="[0-9]*" placeholder="e.g., 72" />
        </div>
      </div>

      <div class="noteLabel">Notes <em>(optional)</em></div>
      <textarea id="notes" class="field" placeholder="optional"></textarea>

      <div class="label">Symptoms</div>
      <div id="symGrid" class="symGrid" aria-label="Symptoms"></div>

      <div class="panelButtons">
        <button id="btnSave" class="btn primary grow" type="button">Save</button>
        <button id="btnDelete" class="btn grow hidden" type="button">Delete</button>
        <button id="btnBackFromAdd" class="btn grow" type="button">Back</button>
      </div>
    </section>

    <!-- Inline (non-generic) confirmations/alerts area:
         Used instead of generic modal popups. -->
    <div id="inlineNotice" class="inlineNotice hidden" role="status" aria-live="polite"></div>

  </div>

  <!-- Modules -->
  <script src="js/version.js"></script>
  <script src="js/store.js"></script>
  <script src="js/state.js"></script>
  <script src="js/gestures.js"></script>
  <script src="js/charts.js"></script>
  <script src="js/export.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>

<!--
Vitals Tracker (Modular) — index.html (EOF)
App Version: v2.001
Notes:
- This file intentionally contains only the app shell and required element IDs.
- All behavior (storage/import safety, swipe + pull-to-refresh, chart pan/zoom, hypertension bands, and visible-range export) is implemented in the JS modules.
- Next expected file: css/app.css
-->
